(this.webpackJsonpdeminor=this.webpackJsonpdeminor||[]).push([[0],{20:function(n,e,t){n.exports=t(29)},25:function(n,e,t){},29:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),o=t(13),i=t.n(o),c=(t(25),t(5)),l=t(3),s=t(4),u=t(6),p=t(7),f=t(9),m=t(8),d=t(10),h=t(1),v=t(2),g=t(17),b=t.n(g),O=t(18),y=t.n(O),j={hiddenCell:"grey",cell:"white",mines0:"#33cc33",mines1:"#80cc33",mines2:"#cccc33",mines3:"#cc8033",mines4:"#cc3333",mines5:"#cc3359",mines6:"#cc33a6"},E={PLAYING:"playing",WON:"won",LOST:"lost"},C=15;function w(){var n=Object(h.a)(["\n  width: 100%;\n"]);return w=function(){return n},n}function k(){var n=Object(h.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n"]);return k=function(){return n},n}function S(){var n=Object(h.a)(["\n  position: relative;\n  width: 10%;\n  height: 10%;\n  border: 1px solid black;\n  display: inline-block;\n  vertical-align: top;\n  box-sizing: border-box;\n  cursor: pointer;\n  background-color: ",";\n  ",";\n"]);return S=function(){return n},n}var N=Object(v.a)("div")(S(),(function(n){return n.cell.hidden?j.hiddenCell:j.cell}),(function(n){var e=n.cell;return"mine"===e.type||e.hidden?"":"color: ".concat(j["mines".concat(e.mines)])})),A=Object(v.a)("span")(k()),T=Object(v.a)("img")(w()),x=function(n){var e=n.cell,t=n.onClick,r=n.onContextClick;return a.a.createElement(N,{cell:e,onClick:t,onContextMenu:r},e.hidden?e.flag?a.a.createElement(T,{src:b.a,alt:"flag"}):"":"mine"===e.type?a.a.createElement(T,{src:y.a,alt:"flame"}):a.a.createElement(A,null,e.mines))},I=function(n){function e(){var n,t;Object(u.a)(this,e);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=Object(f.a)(this,(n=Object(m.a)(e)).call.apply(n,[this].concat(a)))).isGameWon=function(n){return(n||t.props.cells).reduce((function(n,e){var t=e.type,r=e.hidden;return!1!==n&&("mine"===t&&!0===r||"clean"===t&&!1===r)}),!0)},t.findNullCells=function(n){var e,r=n.map((function(n){return[n].concat(Object(s.a)(Object.values($(n,t.props.cells)))).filter((function(n){return"clean"===n.type&&0===n.mines}))})),a=(e=[]).concat.apply(e,Object(s.a)(r)),o={};return a.forEach((function(n){o[n.position]=n})),o=Object.values(o),n.length===o.length?o:t.findNullCells(o)},t.onClickCell=function(n){return function(){var e=t.props.cells,r=t.props,a=r.status,o=r.onWin;if(!n.flag&&a===E.PLAYING){"mine"===n.type&&t.props.dispatch({type:"CHANGE_GAME_STATUS",payload:E.LOST});var i="clean"===n.type&&0===n.mines?t.findNullCells([n]).map((function(n){return n.position})):[n.position],c=e.map((function(n){return i.includes(n.position)?Object(l.a)({},n,{hidden:!1}):n}));t.isGameWon(c)&&o(),t.props.dispatch({type:"SET_CELLS",payload:c})}}},t.onContextMenu=function(n){return function(e){if(!0===n.hidden){e.preventDefault();var r=t.props.cells.map((function(e){return e.position===n.position?Object(l.a)({},e,{flag:!e.flag}):e})),a=r.filter((function(n){return n.flag})).length;t.props.dispatch({type:"ON_PUT_FLAG",payload:{remainingMine:C-a,cells:r}})}}},t}return Object(d.a)(e,n),Object(p.a)(e,[{key:"render",value:function(){var n=this;return this.props.cells.map((function(e){return a.a.createElement(x,{key:e.position,cell:e,onClick:n.onClickCell(e),onContextClick:n.onContextMenu(e)})}))}}]),e}(r.Component);function M(){var n=Object(h.a)(["\n  margin-right: 10px;\n"]);return M=function(){return n},n}function G(){var n=Object(h.a)(["\n  margin-right: 10px;\n"]);return G=function(){return n},n}function L(){var n=Object(h.a)(["\n  position: absolute;\n  top: -15px;\n  left: 0;\n  width: 100%;\n  transform: translateY(-100%);\n  color: white;\n  padding: 10px 0px;\n"]);return L=function(){return n},n}var _=Object(v.a)("div")(L()),W=Object(v.a)("span")(G()),R=Object(v.a)("button")(M()),P=function(n){var e=n.onRestart;return a.a.createElement(K.Consumer,null,(function(n){var t=Object(c.a)(n,1)[0];return a.a.createElement(_,null,a.a.createElement(R,{onClick:e},"restart"),a.a.createElement(W,null,"time : ".concat(t.time)),a.a.createElement(W,null,"remaining : ".concat(t.remainingMine)))}))};function J(){var n=Object(h.a)(["\n  position: absolute;\n  right: 0;\n  color: white;\n  transform: translateX(100%);\n  padding-left: 20px;\n"]);return J=function(){return n},n}var Y=Object(v.a)("div")(J()),U=function(n){var e=n.scores,t=n.resetScores;return a.a.createElement(Y,null,e.map((function(n,e){var t=n.name,r=n.time;return a.a.createElement("p",{key:e},"".concat(t,": ").concat(r))})),a.a.createElement("button",{onClick:t},"Reset scores"))};function H(){var n=Object(h.a)(["\n  position: relative;\n  width: 100vw;\n  height: 100vh;\n  background-color: ",";\n"]);return H=function(){return n},n}function B(){var n=Object(h.a)(["\n  width: 400px;\n  height: 400px;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  background-color: #949494;\n"]);return B=function(){return n},n}var F,Q=Object(v.a)("div")(B()),z=Object(v.a)("div")(H(),(function(n){return n.backgroundColor})),D={playing:"black",won:"green",lost:"red"},X=function(n){function e(){var n;Object(u.a)(this,e),(n=Object(f.a)(this,Object(m.a)(e).call(this))).restart=function(){n.props.dispatch({type:"RESTART"})},n.resetScores=function(){n.setState({scores:[]}),localStorage.setItem("scores","[]")},n.onWin=function(){n.props.dispatch({type:"CHANGE_GAME_STATUS",payload:E.WON});var e=prompt("Please enter your name to save your score or cancel");if(e){var t={name:e,time:n.props.state.time},r=localStorage.getItem("scores"),a=r?[t].concat(Object(s.a)(JSON.parse(r))):[t];n.setState({scores:a}),localStorage.setItem("scores",JSON.stringify(a))}};var t,r=localStorage.getItem("scores")||"[]";try{t=JSON.parse(r)}catch(a){t=[]}return localStorage.setItem("scores",JSON.stringify(t)),n.state={scores:t},n}return Object(d.a)(e,n),Object(p.a)(e,[{key:"render",value:function(){var n=this;return a.a.createElement(z,{backgroundColor:D[this.props.state.status]},a.a.createElement(Q,null,a.a.createElement(P,{onRestart:this.restart}),a.a.createElement(U,{scores:this.state.scores,resetScores:this.resetScores}),a.a.createElement(K.Consumer,null,(function(e){var t=Object(c.a)(e,2),r=t[0],o=t[1];return a.a.createElement(I,{dispatch:o,cells:r.cells,status:r.status,cellQuantity:100,mineQuantity:C,onWin:n.onWin})}))))}}]),e}(r.Component),$=function(n,e){var t=e,r=n.position,a={},o=r<10,i=r%10===0,c=r>=t.length-10,l="9"===function(n){var e=JSON.stringify(n);return e[e.length-1]}(r);return o||(a[r-10]=t[r-10]),o||i||(a[r-11]=t[r-11]),i||(a[r-1]=t[r-1]),i||c||(a[r+9]=t[r+9]),c||(a[r+10]=t[r+10]),c||l||(a[r+11]=t[r+11]),l||(a[r+1]=t[r+1]),o||l||(a[r-9]=t[r-9]),a},q=function(){var n=function n(e,t){var r=Math.floor(Math.random()*e.length);return"mine"!==e[r].type?(e[r].type="mine",1===t?e:n(e,t-=1)):n(e,t)}(Object(s.a)(Array(100).keys()).map((function(n){return{type:"",position:n,hidden:!0,flag:!1}})),C);return n.map((function(e){if("mine"===e.type)return e;var t=e.position,r=$(e,n);return{type:"clean",position:t,mines:Object.values(r).filter((function(n){return"mine"===n.type})).length,hidden:!0}}))},K=a.a.createContext(null);function V(n,e){switch(e.type){case"TIME_INCREMENT":return n.status===E.PLAYING?Object(l.a)({},n,{time:n.time+1}):n;case"RESTART":return Object(l.a)({},n,{status:E.PLAYING,cells:q(),time:0,remainingMine:C});case"SET_CELLS":return Object(l.a)({},n,{cells:e.payload});case"CHANGE_GAME_STATUS":return Object(l.a)({},n,{status:e.payload});case"ON_PUT_FLAG":return Object(l.a)({},n,{remainingMine:e.payload.remainingMine,cells:e.payload.cells});default:throw new Error}}var Z=function(){var n=Object(r.useReducer)(V,{status:E.PLAYING,cells:q(),time:0,remainingMine:C}),e=Object(c.a)(n,2),t=e[0],o=e[1];return Object(r.useEffect)((function(){F&&clearInterval(F),F=setInterval((function(){t.status===E.PLAYING&&o({type:"TIME_INCREMENT"})}),1e3)}),[t.status]),a.a.createElement(K.Provider,{value:[t,o]},a.a.createElement(X,{state:t,dispatch:o}))},nn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function en(n){navigator.serviceWorker.register(n).then((function(n){n.onupdatefound=function(){var e=n.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(n){console.error("Error during service worker registration:",n)}))}i.a.render(a.a.createElement(Z,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/deminor-online",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/deminor-online","/service-worker.js");nn?function(n){fetch(n).then((function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(n){n.unregister().then((function(){window.location.reload()}))})):en(n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n):en(n)}))}}()}},[[20,1,2]]]);
//# sourceMappingURL=main.4dbdc9e0.chunk.js.map