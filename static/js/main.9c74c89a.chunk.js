(this.webpackJsonpdeminor=this.webpackJsonpdeminor||[]).push([[0],{20:function(n,e,t){n.exports=t(31)},25:function(n,e,t){},31:function(n,e,t){"use strict";t.r(e);var r=t(0),o=t.n(r),a=t(5),i=t.n(a),c=(t(25),t(9)),s=t(4),l=t(3),u=t(6),p=t(7),f=t(10),m=t(8),d=t(11),h=t(1),g=t(2),v=t(16),b=t.n(v),O=t(17),y=t.n(O),j={hiddenCell:"grey",cell:"white",mines0:"#33cc33",mines1:"#80cc33",mines2:"#cccc33",mines3:"#cc8033",mines4:"#cc3333",mines5:"#cc3359",mines6:"#cc33a6"},E={PLAYING:"playing",WON:"won",LOST:"lost"},S=15;function C(){var n=Object(h.a)(["\n  width: 100%\n"]);return C=function(){return n},n}function w(){var n=Object(h.a)(["\n  position: absolute\n  top: 50%\n  left: 50%\n  transform: translate(-50%, -50%)\n"]);return w=function(){return n},n}function k(){var n=Object(h.a)(["\n  position: relative\n  width: 10%\n  height: 10%\n  border: 1px solid black\n  display: inline-block\n  vertical-align: top\n  box-sizing: border-box\n  cursor: pointer\n  background-color: ","\n  ","\n"]);return k=function(){return n},n}var T=Object(g.a)("div")(k(),(function(n){return n.cell.hidden?j.hiddenCell:j.cell}),(function(n){var e=n.cell;return"mine"===e.type||e.hidden?"":"color: ".concat(j["mines".concat(e.mines)])})),x=Object(g.a)("span")(w()),N=Object(g.a)("img")(C()),A=function(n){var e=n.cell,t=n.onClick,r=n.onContextClick;return o.a.createElement(T,{cell:e,onClick:t,onContextMenu:r},e.hidden?e.flag?o.a.createElement(N,{src:b.a,alt:"flag"}):"":"mine"===e.type?o.a.createElement(N,{src:y.a,alt:"flame"}):o.a.createElement(x,null,e.mines))},L=function(n){function e(){var n,t;Object(u.a)(this,e);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(t=Object(f.a)(this,(n=Object(m.a)(e)).call.apply(n,[this].concat(o)))).isGameWon=function(n){return(n||t.props.cells).reduce((function(n,e){var t=e.type,r=e.hidden;return!1!==n&&("mine"===t&&!0===r||"clean"===t&&!1===r)}),!0)},t.findNullCells=function(n){var e,r=n.map((function(n){return[n].concat(Object(l.a)(Object.values(D(n,t.props.cells)))).filter((function(n){return"clean"===n.type&&0===n.mines}))})),o=(e=[]).concat.apply(e,Object(l.a)(r)),a={};return o.forEach((function(n){a[n.position]=n})),a=Object.values(a),n.length===a.length?a:t.findNullCells(a)},t.onClickCell=function(n){return function(){var e=t.props.cells,r=t.props,o=r.status,a=r.onLose,i=r.onWin;if(!n.flag&&o===E.PLAYING){"mine"===n.type&&a();var c="clean"===n.type&&0===n.mines?t.findNullCells([n]).map((function(n){return n.position})):[n.position],l=e.map((function(n){return c.includes(n.position)?Object(s.a)({},n,{hidden:!1}):n}));t.isGameWon(l)&&i(),t.props.dispatch({type:"SET_CELLS",payload:l})}}},t.onContextMenu=function(n){return function(e){var r=t.props.onPutFlag;if(!0===n.hidden){e.preventDefault();var o=t.props.cells.map((function(e){return e.position===n.position?Object(s.a)({},e,{flag:!e.flag}):e}));r(o.filter((function(n){return n.flag})).length),t.props.dispatch({type:"SET_CELLS",payload:o})}}},t}return Object(d.a)(e,n),Object(p.a)(e,[{key:"render",value:function(){var n=this;return this.props.cells.map((function(e){return o.a.createElement(A,{key:e.position,cell:e,onClick:n.onClickCell(e),onContextClick:n.onContextMenu(e)})}))}}]),e}(r.Component);function M(){var n=Object(h.a)(["\n  margin-right: 10px\n"]);return M=function(){return n},n}function W(){var n=Object(h.a)(["\n  margin-right: 10px\n"]);return W=function(){return n},n}function G(){var n=Object(h.a)(["\n  position: absolute\n  top: -15px\n  left: 0\n  width: 100%\n  transform: translateY(-100%)\n  color: white\n  padding: 10px 0px\n"]);return G=function(){return n},n}var I=Object(g.a)("div")(G()),P=Object(g.a)("span")(W()),R=Object(g.a)("button")(M()),_=function(n){var e=n.time,t=n.remainingMine,r=n.onRestart;return o.a.createElement(I,null,o.a.createElement(R,{onClick:r},"restart"),o.a.createElement(P,null,"time : ".concat(e)),o.a.createElement(P,null,"remaining : ".concat(t)))};function J(){var n=Object(h.a)(["\n  position: absolute\n  right: 0\n  color: white\n  transform: translateX(100%)\n  padding-left: 20px\n"]);return J=function(){return n},n}var U=Object(g.a)("div")(J()),Y=function(n){var e=n.scores,t=n.resetScores;return o.a.createElement(U,null,e.map((function(n,e){var t=n.name,r=n.time;return o.a.createElement("p",{key:e},"".concat(t,": ").concat(r))})),o.a.createElement("button",{onClick:t},"Reset scores"))};function F(){var n=Object(h.a)(["\n  position: relative\n  width: 100vw\n  height: 100vh\n  background-color: ","\n"]);return F=function(){return n},n}function H(){var n=Object(h.a)(["\n  width: 400px\n  height: 400px\n  position: absolute\n  left: 50%\n  top: 50%\n  transform: translate(-50%, -50%)\n  background-color: #949494\n"]);return H=function(){return n},n}var B=Object(g.a)("div")(H()),Q=Object(g.a)("div")(F(),(function(n){return n.backgroundColor})),z=function(n){function e(){var n;Object(u.a)(this,e),(n=Object(f.a)(this,Object(m.a)(e).call(this))).startTimer=function(){n.onSecondsChange&&n.stopTimer(),n.onSecondsChange=setInterval((function(){n.setState({time:n.state.time+1})}),1e3)},n.stopTimer=function(){clearInterval(n.onSecondsChange)},n.restart=function(){n.props.dispatch({type:"RESTART"}),n.setState({time:0,remainingMine:S}),n.startTimer()},n.resetScores=function(){n.setState({scores:[]}),localStorage.setItem("scores","[]")},n.onWin=function(){n.stopTimer(),n.props.dispatch({type:"CHANGE_GAME_STATUS",payload:E.WON});var e=prompt("Please enter your name to save your score or cancel");if(e){var t={name:e,time:n.state.time},r=localStorage.getItem("scores"),o=r?[t].concat(Object(l.a)(JSON.parse(r))):[t];n.setState({scores:o}),localStorage.setItem("scores",JSON.stringify(o))}},n.onLose=function(){n.stopTimer(),n.props.dispatch({type:"CHANGE_GAME_STATUS",payload:E.LOST})},n.onPutFlag=function(e){var t=S-e;n.setState({remainingMine:t})};var t,r=localStorage.getItem("scores")||"[]";try{t=JSON.parse(r)}catch(o){t=[]}return localStorage.setItem("scores",JSON.stringify(t)),n.colors={playing:"black",won:"green",lost:"red"},n.state={time:0,remainingMine:S,scores:t},n.startTimer(),n}return Object(d.a)(e,n),Object(p.a)(e,[{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"render",value:function(){var n=this,e=this.state,t=e.time,r=e.scores,a=e.remainingMine;return o.a.createElement(Q,{backgroundColor:this.colors[this.props.state.status]},o.a.createElement(B,null,o.a.createElement(_,{time:t,remainingMine:a,onRestart:this.restart}),o.a.createElement(Y,{scores:r,resetScores:this.resetScores}),o.a.createElement($.Consumer,null,(function(e){var t=Object(c.a)(e,2),r=t[0],a=t[1];return o.a.createElement(L,{dispatch:a,cells:r.cells,status:r.status,cellQuantity:100,mineQuantity:S,onLose:n.onLose,onWin:n.onWin,onPutFlag:n.onPutFlag})}))))}}]),e}(r.Component),D=function(n,e){var t=e,r=n.position,o={},a=r<10,i=r%10===0,c=r>=t.length-10,s="9"===function(n){var e=JSON.stringify(n);return e[e.length-1]}(r);return a||(o[r-10]=t[r-10]),a||i||(o[r-11]=t[r-11]),i||(o[r-1]=t[r-1]),i||c||(o[r+9]=t[r+9]),c||(o[r+10]=t[r+10]),c||s||(o[r+11]=t[r+11]),s||(o[r+1]=t[r+1]),a||s||(o[r-9]=t[r-9]),o},X=function(){var n=function n(e,t){var r=Math.floor(Math.random()*e.length);return"mine"!==e[r].type?(e[r].type="mine",1===t?e:n(e,t-=1)):n(e,t)}(Object(l.a)(Array(100).keys()).map((function(n){return{type:"",position:n,hidden:!0,flag:!1}})),S);return n.map((function(e){if("mine"===e.type)return e;var t=e.position,r=D(e,n);return{type:"clean",position:t,mines:Object.values(r).filter((function(n){return"mine"===n.type})).length,hidden:!0}}))},$=o.a.createContext(null);function q(n,e){switch(e.type){case"RESTART":return Object(s.a)({},n,{status:E.PLAYING,cells:X()});case"SET_CELLS":return Object(s.a)({},n,{cells:e.payload});case"CHANGE_GAME_STATUS":return Object(s.a)({},n,{status:e.payload});default:throw new Error}}var K=function(){var n=Object(r.useReducer)(q,{status:E.PLAYING,cells:X()}),e=Object(c.a)(n,2),t=e[0],a=e[1];return o.a.createElement($.Provider,{value:[t,a]},o.a.createElement(z,{state:t,dispatch:a}))},V=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Z(n){navigator.serviceWorker.register(n).then((function(n){n.onupdatefound=function(){var e=n.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(n){console.error("Error during service worker registration:",n)}))}i.a.render(o.a.createElement(K,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/deminor-online",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/deminor-online","/service-worker.js");V?function(n){fetch(n).then((function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(n){n.unregister().then((function(){window.location.reload()}))})):Z(n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n):Z(n)}))}}()}},[[20,1,2]]]);
//# sourceMappingURL=main.9c74c89a.chunk.js.map