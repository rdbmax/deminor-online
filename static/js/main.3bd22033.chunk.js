(this.webpackJsonpdeminor=this.webpackJsonpdeminor||[]).push([[0],{19:function(n,e,t){n.exports=t(30)},24:function(n,e,t){},30:function(n,e,t){"use strict";t.r(e);var r=t(0),o=t.n(r),i=t(4),a=t.n(i),c=(t(24),t(3)),s=t(5),l=t(6),u=t(8),f=t(7),m=t(9),p=t(1),g=t(2),d=t(13),h=t(15),v=t.n(h),b=t(16),O=t.n(b),y={hiddenCell:"grey",cell:"white",mines0:"#33cc33",mines1:"#80cc33",mines2:"#cccc33",mines3:"#cc8033",mines4:"#cc3333",mines5:"#cc3359",mines6:"#cc33a6"},j={PLAYING:"playing",WON:"won",LOST:"lost"},C=15;function w(){var n=Object(p.a)(["\n  width: 100%\n"]);return w=function(){return n},n}function k(){var n=Object(p.a)(["\n  position: absolute\n  top: 50%\n  left: 50%\n  transform: translate(-50%, -50%)\n"]);return k=function(){return n},n}function S(){var n=Object(p.a)(["\n  position: relative\n  width: 10%\n  height: 10%\n  border: 1px solid black\n  display: inline-block\n  vertical-align: top\n  box-sizing: border-box\n  cursor: pointer\n  background-color: ","\n  ","\n"]);return S=function(){return n},n}var E=Object(g.a)("div")(S(),(function(n){return n.cell.hidden?y.hiddenCell:y.cell}),(function(n){var e=n.cell;return"mine"===e.type||e.hidden?"":"color: ".concat(y["mines".concat(e.mines)])})),N=Object(g.a)("span")(k()),x=Object(g.a)("img")(w()),T=function(n){var e=n.cell,t=n.onClick,r=(n.children,n.onContextClick);return o.a.createElement(E,{cell:e,onClick:t,onContextMenu:r},e.hidden?e.flag?o.a.createElement(x,{src:v.a,alt:"flag"}):"":"mine"===e.type?o.a.createElement(x,{src:O.a,alt:"flame"}):o.a.createElement(N,null,e.mines))},M=function(n){function e(n){var t;return Object(s.a)(this,e),(t=Object(u.a)(this,Object(f.a)(e).call(this,n))).getNewGameCells=function(){var n=t.props,e=n.cellQuantity,r=n.mineQuantity,o=Object(c.a)(Array(e).keys()).map((function(n){return{type:"",position:n,hidden:!0,flag:!1}})),i=t.getMines(o,r);return i.map((function(n){if("mine"===n.type)return n;var e=n.position,r=t.getCloseCells(n,i);return{type:"clean",position:e,mines:Object.values(r).filter((function(n){return"mine"===n.type})).length,hidden:!0}}))},t.isGameWon=function(n){return(n||t.state.cells).reduce((function(n,e){var t=e.type,r=e.hidden;return!1!==n&&("mine"===t&&!0===r||"clean"===t&&!1===r)}),!0)},t.getMines=function(n,e){var r=Math.floor(Math.random()*n.length);return"mine"!==n[r].type?(n[r].type="mine",1===e?n:t.getMines(n,e-=1)):t.getMines(n,e)},t.getCloseCells=function(n,e){var r=e||t.state.cells,o=n.position,i={},a=o<10,c=o%10===0,s=o>=r.length-10,l="9"===t.getLastDigit(o);return a||(i[o-10]=r[o-10]),a||c||(i[o-11]=r[o-11]),c||(i[o-1]=r[o-1]),c||s||(i[o+9]=r[o+9]),s||(i[o+10]=r[o+10]),s||l||(i[o+11]=r[o+11]),l||(i[o+1]=r[o+1]),a||l||(i[o-9]=r[o-9]),i},t.getLastDigit=function(n){var e=JSON.stringify(n);return e[e.length-1]},t.findNullCells=function(n){var e,r=n.map((function(n){return[n].concat(Object(c.a)(Object.values(t.getCloseCells(n)))).filter((function(n){return"clean"===n.type&&0===n.mines}))})),o=(e=[]).concat.apply(e,Object(c.a)(r)),i={};return o.forEach((function(n){i[n.position]=n})),i=Object.values(i),n.length===i.length?i:t.findNullCells(i)},t.onClickCell=function(n){return function(){var e=t.state.cells,r=t.props,o=r.status,i=r.onLose,a=r.onWin;if(!n.flag&&o===j.PLAYING){"mine"===n.type&&i();var c="clean"===n.type&&0===n.mines?t.findNullCells([n]).map((function(n){return n.position})):[n.position],s=e.map((function(n){return c.includes(n.position)?Object(d.a)({},n,{hidden:!1}):n}));t.isGameWon(s)&&a(),t.setState({cells:s})}}},t.onContextMenu=function(n){return function(e){var r=t.props.onPutFlag;if(!0===n.hidden){e.preventDefault();var o=t.state.cells.map((function(e){return e.position===n.position?Object(d.a)({},e,{flag:!e.flag}):e}));r(o.filter((function(n){return n.flag})).length),t.setState({cells:o})}}},t.state={cells:t.getNewGameCells()},t}return Object(m.a)(e,n),Object(l.a)(e,[{key:"componentDidUpdate",value:function(n){var e=n.nbTry;this.props.nbTry!==e&&this.setState({cells:this.getNewGameCells()})}},{key:"render",value:function(){var n=this;return this.state.cells.map((function(e){return o.a.createElement(T,{key:e.position,cell:e,onClick:n.onClickCell(e),onContextClick:n.onContextMenu(e)})}))}}]),e}(r.Component);function L(){var n=Object(p.a)(["\n  margin-right: 10px\n"]);return L=function(){return n},n}function W(){var n=Object(p.a)(["\n  margin-right: 10px\n"]);return W=function(){return n},n}function I(){var n=Object(p.a)(["\n  position: absolute\n  top: -15px\n  left: 0\n  width: 100%\n  transform: translateY(-100%)\n  color: white\n  padding: 10px 0px\n"]);return I=function(){return n},n}var G=Object(g.a)("div")(I()),P=Object(g.a)("span")(W()),J=Object(g.a)("button")(L()),A=function(n){var e=n.time,t=(n.status,n.remainingMine),r=n.onRestart;return o.a.createElement(G,null,o.a.createElement(J,{onClick:r},"restart"),o.a.createElement(P,null,"time : ".concat(e)),o.a.createElement(P,null,"remaining : ".concat(t)))};function Y(){var n=Object(p.a)(["\n  position: absolute\n  right: 0\n  color: white\n  transform: translateX(100%)\n  padding-left: 20px\n"]);return Y=function(){return n},n}var D=Object(g.a)("div")(Y()),F=function(n){var e=n.scores,t=n.resetScores;return o.a.createElement(D,null,e.map((function(n,e){var t=n.name,r=n.time;return o.a.createElement("p",{key:e},"".concat(t,": ").concat(r))})),o.a.createElement("button",{onClick:t},"Reset scores"))};function Q(){var n=Object(p.a)(["\n  position: relative\n  width: 100vw\n  height: 100vh\n  background-color: ","\n"]);return Q=function(){return n},n}function R(){var n=Object(p.a)(["\n  width: 400px\n  height: 400px\n  position: absolute\n  left: 50%\n  top: 50%\n  transform: translate(-50%, -50%)\n  background-color: #949494\n"]);return R=function(){return n},n}var U=Object(g.a)("div")(R()),B=Object(g.a)("div")(Q(),(function(n){return n.backgroundColor})),z=function(n){function e(){var n;Object(s.a)(this,e),(n=Object(u.a)(this,Object(f.a)(e).call(this))).startTimer=function(){n.onSecondsChange&&n.stopTimer(),n.onSecondsChange=setInterval((function(){n.setState({time:n.state.time+1})}),1e3)},n.stopTimer=function(){clearInterval(n.onSecondsChange)},n.restart=function(){n.setState({time:0,status:j.PLAYING,remainingMine:C,nbTry:n.state.nbTry+1}),n.startTimer()},n.resetScores=function(){n.setState({scores:[]}),localStorage.setItem("scores","[]")},n.onWin=function(){n.stopTimer(),n.setState({status:j.WON});var e=prompt("Please enter your name to save your score or cancel");if(e){var t={name:e,time:n.state.time},r=localStorage.getItem("scores"),o=r?[t].concat(Object(c.a)(JSON.parse(r))):[t];n.setState({scores:o}),localStorage.setItem("scores",JSON.stringify(o))}},n.onLose=function(){n.stopTimer(),n.setState({status:j.LOST})},n.onPutFlag=function(e){var t=C-e;n.setState({remainingMine:t})};var t,r=localStorage.getItem("scores")||"[]";try{t=JSON.parse(r)}catch(o){t=[]}return localStorage.setItem("scores",JSON.stringify(t)),n.colors={playing:"black",won:"green",lost:"red"},n.state={status:j.PLAYING,time:0,nbTry:0,remainingMine:C,scores:t},n.startTimer(),n}return Object(m.a)(e,n),Object(l.a)(e,[{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"render",value:function(){var n=this.state,e=n.time,t=n.status,r=n.nbTry,i=n.scores,a=n.remainingMine;return o.a.createElement(B,{backgroundColor:this.colors[t]},o.a.createElement(U,null,o.a.createElement(A,{time:e,status:t,remainingMine:a,onRestart:this.restart}),o.a.createElement(F,{scores:i,resetScores:this.resetScores}),o.a.createElement(M,{status:t,nbTry:r,cellQuantity:100,mineQuantity:C,onLose:this.onLose,onWin:this.onWin,onPutFlag:this.onPutFlag})))}}]),e}(r.Component),X=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function $(n){navigator.serviceWorker.register(n).then((function(n){n.onupdatefound=function(){var e=n.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(n){console.error("Error during service worker registration:",n)}))}a.a.render(o.a.createElement(z,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/deminor-online",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/deminor-online","/service-worker.js");X?function(n){fetch(n).then((function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(n){n.unregister().then((function(){window.location.reload()}))})):$(n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n):$(n)}))}}()}},[[19,1,2]]]);
//# sourceMappingURL=main.3bd22033.chunk.js.map