(this.webpackJsonpdeminor=this.webpackJsonpdeminor||[]).push([[0],{20:function(e,n,t){e.exports=t(31)},25:function(e,n,t){},31:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r),a=t(5),i=t.n(a),c=(t(25),t(9)),s=t(4),l=t(3),u=t(6),f=t(7),m=t(10),p=t(8),g=t(11),d=t(1),h=t(2),v=t(16),b=t.n(v),O=t(17),y=t.n(O),j={hiddenCell:"grey",cell:"white",mines0:"#33cc33",mines1:"#80cc33",mines2:"#cccc33",mines3:"#cc8033",mines4:"#cc3333",mines5:"#cc3359",mines6:"#cc33a6"},C={PLAYING:"playing",WON:"won",LOST:"lost"},w=15;function k(){var e=Object(d.a)(["\n  width: 100%\n"]);return k=function(){return e},e}function S(){var e=Object(d.a)(["\n  position: absolute\n  top: 50%\n  left: 50%\n  transform: translate(-50%, -50%)\n"]);return S=function(){return e},e}function E(){var e=Object(d.a)(["\n  position: relative\n  width: 10%\n  height: 10%\n  border: 1px solid black\n  display: inline-block\n  vertical-align: top\n  box-sizing: border-box\n  cursor: pointer\n  background-color: ","\n  ","\n"]);return E=function(){return e},e}var N=Object(h.a)("div")(E(),(function(e){return e.cell.hidden?j.hiddenCell:j.cell}),(function(e){var n=e.cell;return"mine"===n.type||n.hidden?"":"color: ".concat(j["mines".concat(n.mines)])})),x=Object(h.a)("span")(S()),T=Object(h.a)("img")(k()),M=function(e){var n=e.cell,t=e.onClick,r=e.onContextClick;return o.a.createElement(N,{cell:n,onClick:t,onContextMenu:r},n.hidden?n.flag?o.a.createElement(T,{src:b.a,alt:"flag"}):"":"mine"===n.type?o.a.createElement(T,{src:y.a,alt:"flame"}):o.a.createElement(x,null,n.mines))},L=function(e){function n(e){var t;return Object(u.a)(this,n),(t=Object(m.a)(this,Object(p.a)(n).call(this,e))).getNewGameCells=function(){var e=t.props,n=e.cellQuantity,r=e.mineQuantity,o=Object(l.a)(Array(n).keys()).map((function(e){return{type:"",position:e,hidden:!0,flag:!1}})),a=t.getMines(o,r);return a.map((function(e){if("mine"===e.type)return e;var n=e.position,r=t.getCloseCells(e,a);return{type:"clean",position:n,mines:Object.values(r).filter((function(e){return"mine"===e.type})).length,hidden:!0}}))},t.isGameWon=function(e){return(e||t.state.cells).reduce((function(e,n){var t=n.type,r=n.hidden;return!1!==e&&("mine"===t&&!0===r||"clean"===t&&!1===r)}),!0)},t.getMines=function(e,n){var r=Math.floor(Math.random()*e.length);return"mine"!==e[r].type?(e[r].type="mine",1===n?e:t.getMines(e,n-=1)):t.getMines(e,n)},t.getCloseCells=function(e,n){var r=n||t.state.cells,o=e.position,a={},i=o<10,c=o%10===0,s=o>=r.length-10,l="9"===t.getLastDigit(o);return i||(a[o-10]=r[o-10]),i||c||(a[o-11]=r[o-11]),c||(a[o-1]=r[o-1]),c||s||(a[o+9]=r[o+9]),s||(a[o+10]=r[o+10]),s||l||(a[o+11]=r[o+11]),l||(a[o+1]=r[o+1]),i||l||(a[o-9]=r[o-9]),a},t.getLastDigit=function(e){var n=JSON.stringify(e);return n[n.length-1]},t.findNullCells=function(e){var n,r=e.map((function(e){return[e].concat(Object(l.a)(Object.values(t.getCloseCells(e)))).filter((function(e){return"clean"===e.type&&0===e.mines}))})),o=(n=[]).concat.apply(n,Object(l.a)(r)),a={};return o.forEach((function(e){a[e.position]=e})),a=Object.values(a),e.length===a.length?a:t.findNullCells(a)},t.onClickCell=function(e){return function(){var n=t.state.cells,r=t.props,o=r.status,a=r.onLose,i=r.onWin;if(!e.flag&&o===C.PLAYING){"mine"===e.type&&a();var c="clean"===e.type&&0===e.mines?t.findNullCells([e]).map((function(e){return e.position})):[e.position],l=n.map((function(e){return c.includes(e.position)?Object(s.a)({},e,{hidden:!1}):e}));t.isGameWon(l)&&i(),t.setState({cells:l})}}},t.onContextMenu=function(e){return function(n){var r=t.props.onPutFlag;if(!0===e.hidden){n.preventDefault();var o=t.state.cells.map((function(n){return n.position===e.position?Object(s.a)({},n,{flag:!n.flag}):n}));r(o.filter((function(e){return e.flag})).length),t.setState({cells:o})}}},t.state={cells:t.getNewGameCells()},t}return Object(g.a)(n,e),Object(f.a)(n,[{key:"componentDidUpdate",value:function(e){var n=e.nbTry;this.props.nbTry!==n&&this.setState({cells:this.getNewGameCells()})}},{key:"render",value:function(){var e=this;return this.state.cells.map((function(n){return o.a.createElement(M,{key:n.position,cell:n,onClick:e.onClickCell(n),onContextClick:e.onContextMenu(n)})}))}}]),n}(r.Component);function I(){var e=Object(d.a)(["\n  margin-right: 10px\n"]);return I=function(){return e},e}function W(){var e=Object(d.a)(["\n  margin-right: 10px\n"]);return W=function(){return e},e}function G(){var e=Object(d.a)(["\n  position: absolute\n  top: -15px\n  left: 0\n  width: 100%\n  transform: translateY(-100%)\n  color: white\n  padding: 10px 0px\n"]);return G=function(){return e},e}var P=Object(h.a)("div")(G()),A=Object(h.a)("span")(W()),J=Object(h.a)("button")(I()),Y=function(e){var n=e.time,t=e.remainingMine,r=e.onRestart;return o.a.createElement(P,null,o.a.createElement(J,{onClick:r},"restart"),o.a.createElement(A,null,"time : ".concat(n)),o.a.createElement(A,null,"remaining : ".concat(t)))};function R(){var e=Object(d.a)(["\n  position: absolute\n  right: 0\n  color: white\n  transform: translateX(100%)\n  padding-left: 20px\n"]);return R=function(){return e},e}var D=Object(h.a)("div")(R()),F=function(e){var n=e.scores,t=e.resetScores;return o.a.createElement(D,null,n.map((function(e,n){var t=e.name,r=e.time;return o.a.createElement("p",{key:n},"".concat(t,": ").concat(r))})),o.a.createElement("button",{onClick:t},"Reset scores"))};function Q(){var e=Object(d.a)(["\n  position: relative\n  width: 100vw\n  height: 100vh\n  background-color: ","\n"]);return Q=function(){return e},e}function U(){var e=Object(d.a)(["\n  width: 400px\n  height: 400px\n  position: absolute\n  left: 50%\n  top: 50%\n  transform: translate(-50%, -50%)\n  background-color: #949494\n"]);return U=function(){return e},e}var B=Object(h.a)("div")(U()),_=Object(h.a)("div")(Q(),(function(e){return e.backgroundColor})),z=function(e){function n(){var e;Object(u.a)(this,n),(e=Object(m.a)(this,Object(p.a)(n).call(this))).startTimer=function(){e.onSecondsChange&&e.stopTimer(),e.onSecondsChange=setInterval((function(){e.setState({time:e.state.time+1})}),1e3)},e.stopTimer=function(){clearInterval(e.onSecondsChange)},e.restart=function(){e.setState({time:0,status:C.PLAYING,remainingMine:w,nbTry:e.state.nbTry+1}),e.startTimer()},e.resetScores=function(){e.setState({scores:[]}),localStorage.setItem("scores","[]")},e.onWin=function(){e.stopTimer(),e.setState({status:C.WON});var n=prompt("Please enter your name to save your score or cancel");if(n){var t={name:n,time:e.state.time},r=localStorage.getItem("scores"),o=r?[t].concat(Object(l.a)(JSON.parse(r))):[t];e.setState({scores:o}),localStorage.setItem("scores",JSON.stringify(o))}},e.onLose=function(){e.stopTimer(),e.setState({status:C.LOST})},e.onPutFlag=function(n){var t=w-n;e.setState({remainingMine:t})};var t,r=localStorage.getItem("scores")||"[]";try{t=JSON.parse(r)}catch(o){t=[]}return localStorage.setItem("scores",JSON.stringify(t)),e.colors={playing:"black",won:"green",lost:"red"},e.state={status:C.PLAYING,time:0,nbTry:0,remainingMine:w,scores:t},e.startTimer(),e}return Object(g.a)(n,e),Object(f.a)(n,[{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"render",value:function(){var e=this,n=this.state,t=n.time,r=n.status,a=n.nbTry,i=n.scores,s=n.remainingMine;return o.a.createElement(_,{backgroundColor:this.colors[r]},o.a.createElement(B,null,o.a.createElement(Y,{time:t,remainingMine:s,onRestart:this.restart}),o.a.createElement(F,{scores:i,resetScores:this.resetScores}),o.a.createElement(H.Consumer,null,(function(n){var t=Object(c.a)(n,1)[0];return o.a.createElement(L,{status:t.status,nbTry:a,cellQuantity:100,mineQuantity:w,onLose:e.onLose,onWin:e.onWin,onPutFlag:e.onPutFlag})}))))}}]),n}(r.Component),H=o.a.createContext(null);function X(e,n){switch(n.type){case"CHANGE_GAME_STATUS":return Object(s.a)({},e,{status:n.payload});default:throw new Error}}var $=function(){var e=Object(r.useReducer)(X,{status:C.PLAYING}),n=Object(c.a)(e,2),t=n[0],a=n[1];return o.a.createElement(H.Provider,{value:[t,a]},o.a.createElement(z,null))},q=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function K(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?console.log("New content is available please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(o.a.createElement($,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/deminor-online",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/deminor-online","/service-worker.js");q?function(e){fetch(e).then((function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):K(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):K(e)}))}}()}},[[20,1,2]]]);
//# sourceMappingURL=main.cea9f12a.chunk.js.map